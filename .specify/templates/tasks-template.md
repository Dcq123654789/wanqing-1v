---

description: "功能实施的任务列表模板"

---

# 任务列表: [功能名称]

**输入**: 来自 `/specs/[###-feature-name]/` 的设计文档
**前置条件**: plan.md (必需), spec.md (用户故事需要), research.md, data-model.md, contracts/

**测试**: 以下示例包含测试任务。测试是**可选的** - 仅在功能规格中明确要求时才包含

**组织方式**: 任务按用户故事分组，以实现每个故事的独立实施和测试

## 格式: `[ID] [P?] [Story] 描述`

- **[P]**: 可并行运行 (不同文件, 无依赖关系)
- **[Story]**: 此任务属于哪个用户故事 (例如: US1, US2, US3)
- 在描述中包含确切的文件路径

## 路径约定

- **单体项目**: 仓库根目录的 `src/`, `tests/`
- **Web应用**: `backend/src/`, `frontend/src/`
- **移动端**: `api/src/`, `ios/src/` 或 `android/src/`
- 以下路径假设单体项目 - 根据 plan.md 的结构进行调整

<!--
  ============================================================================
  重要: 下面的任务仅用于说明的示例任务

  /speckit.tasks 命令必须根据以下内容替换为实际任务:
  - spec.md 中的用户故事（及其优先级 P1, P2, P3...）
  - plan.md 中的功能需求
  - data-model.md 中的实体
  - contracts/ 中的端点

  任务必须按用户故事组织，以便每个故事可以:
  - 独立实施
  - 独立测试
  - 作为MVP增量交付

  不要在生成的 tasks.md 文件中保留这些示例任务
  ============================================================================
-->

## 阶段 1: 初始化 (共享基础设施)

**目的**: 项目初始化和基础结构搭建

- [ ] T001 按照实施计划创建项目结构
- [ ] T002 使用 [编程语言] 依赖初始化 [框架] 项目
- [ ] T003 [P] 配置代码检查和格式化工具

---

## 阶段 2: 基础设施 (阻塞性前置条件)

**目的**: 必须在任何用户故事实施前完成的核心基础设施

**⚠️ 关键**: 此阶段完成前不能开始任何用户故事的工作

基础设施任务示例 (根据项目调整):

- [ ] T004 设置数据库架构和迁移框架
- [ ] T005 [P] 实现认证/授权框架
- [ ] T006 [P] 设置API路由和中间件结构
- [ ] T007 创建所有故事依赖的基础模型/实体
- [ ] T008 配置错误处理和日志基础设施
- [ ] T009 设置环境配置管理

**检查点**: 基础设施就绪 - 现在可以开始并行实施用户故事

---

## 阶段 3: 用户故事 1 - [标题] (优先级: P1) 🎯 MVP

**目标**: [简述此故事交付的内容]

**独立测试**: [如何验证此故事独立工作]

### 用户故事 1 的测试 (可选 - 仅在要求测试时) ⚠️

> **注意: 先编写这些测试，确保在实施前它们会失败**

- [ ] T010 [P] [US1] [端点] 的契约测试 于 tests/contract/test_[name].py
- [ ] T011 [P] [US1] [用户旅程] 的集成测试 于 tests/integration/test_[name].py

### 用户故事 1 的实施

- [ ] T012 [P] [US1] 创建 [实体1] 模型 于 src/models/[entity1].py
- [ ] T013 [P] [US1] 创建 [实体2] 模型 于 src/models/[entity2].py
- [ ] T014 [US1] 实现 [服务] 于 src/services/[service].py (依赖 T012, T013)
- [ ] T015 [US1] 实现 [端点/功能] 于 src/[location]/[file].py
- [ ] T016 [US1] 添加验证和错误处理
- [ ] T017 [US1] 添加用户故事1操作的日志

**检查点**: 此时，用户故事1应该完全可用且可独立测试

---

## 阶段 4: 用户故事 2 - [标题] (优先级: P2)

**目标**: [简述此故事交付的内容]

**独立测试**: [如何验证此故事独立工作]

### 用户故事 2 的测试 (可选 - 仅在要求测试时) ⚠️

- [ ] T018 [P] [US2] [端点] 的契约测试 于 tests/contract/test_[name].py
- [ ] T019 [P] [US2] [用户旅程] 的集成测试 于 tests/integration/test_[name].py

### 用户故事 2 的实施

- [ ] T020 [P] [US2] 创建 [实体] 模型 于 src/models/[entity].py
- [ ] T021 [US2] 实现 [服务] 于 src/services/[service].py
- [ ] T022 [US2] 实现 [端点/功能] 于 src/[location]/[file].py
- [ ] T023 [US2] 与用户故事1的组件集成 (如需要)

**检查点**: 此时，用户故事1和2都应该独立工作

---

## 阶段 5: 用户故事 3 - [标题] (优先级: P3)

**目标**: [简述此故事交付的内容]

**独立测试**: [如何验证此故事独立工作]

### 用户故事 3 的测试 (可选 - 仅在要求测试时) ⚠️

- [ ] T024 [P] [US3] [端点] 的契约测试 于 tests/contract/test_[name].py
- [ ] T025 [P] [US3] [用户旅程] 的集成测试 于 tests/integration/test_[name].py

### 用户故事 3 的实施

- [ ] T026 [P] [US3] 创建 [实体] 模型 于 src/models/[entity].py
- [ ] T027 [US3] 实现 [服务] 于 src/services/[service].py
- [ ] T028 [US3] 实现 [端点/功能] 于 src/[location]/[file].py

**检查点**: 所有用户故事现在都应该独立可用

---

[按照相同模式添加更多用户故事阶段]

---

## 阶段 N: 完善与跨故事关注点

**目的**: 影响多个用户故事的改进

- [ ] TXXX [P] 文档更新 于 docs/
- [ ] TXXX 代码清理和重构
- [ ] TXXX 所有故事的性能优化
- [ ] TXXX [P] 额外的单元测试 (如要求) 于 tests/unit/
- [ ] TXXX 安全加固
- [ ] TXXX 运行 quickstart.md 验证

---

## 依赖关系与执行顺序

### 阶段依赖

- **初始化 (阶段1)**: 无依赖 - 可立即开始
- **基础设施 (阶段2)**: 依赖初始化完成 - 阻塞所有用户故事
- **用户故事 (阶段3+)**: 全部依赖基础设施阶段完成
  - 用户故事可并行进行 (如果有人员)
  - 或按优先级顺序进行 (P1 → P2 → P3)
- **完善 (最后阶段)**: 依赖所有期望的用户故事完成

### 用户故事依赖

- **用户故事 1 (P1)**: 基础设施完成后可开始 - 无其他故事依赖
- **用户故事 2 (P2)**: 基础设施完成后可开始 - 可与US1集成但应独立可测试
- **用户故事 3 (P3)**: 基础设施完成后可开始 - 可与US1/US2集成但应独立可测试

### 每个用户故事内

- 测试 (如包含) 必须先编写并失败
- 模型在服务之前
- 服务在接口之前
- 核心实施在集成之前
- 故事完成后才进入下一优先级

### 并行机会

- 初始化阶段所有标记[P]的任务可并行运行
- 基础设施阶段所有标记[P]的任务可并行运行 (阶段2内)
- 基础设施阶段完成后，所有用户故事可并行开始 (如团队容量允许)
- 用户故事所有标记[P]的测试可并行运行
- 故事内标记[P]的模型可并行运行
- 不同用户故事可由不同团队成员并行工作

---

## 并行示例: 用户故事 1

```bash
# 一起启动用户故事1的所有测试 (如要求测试):
任务: "[端点] 的契约测试 于 tests/contract/test_[name].py"
任务: "[用户旅程] 的集成测试 于 tests/integration/test_[name].py"

# 一起启动用户故事1的所有模型:
任务: "创建 [实体1] 模型 于 src/models/[entity1].py"
任务: "创建 [实体2] 模型 于 src/models/[entity2].py"
```

---

## 实施策略

### MVP优先 (仅用户故事 1)

1. 完成阶段1: 初始化
2. 完成阶段2: 基础设施 (关键 - 阻塞所有故事)
3. 完成阶段3: 用户故事 1
4. **停止并验证**: 独立测试用户故事 1
5. 如就绪则部署/演示

### 增量交付

1. 完成初始化 + 基础设施 → 基础就绪
2. 添加用户故事 1 → 独立测试 → 部署/演示 (MVP!)
3. 添加用户故事 2 → 独立测试 → 部署/演示
4. 添加用户故事 3 → 独立测试 → 部署/演示
5. 每个故事增加价值而不破坏之前的故事

### 并行团队策略

多名开发者:

1. 团队一起完成初始化 + 基础设施
2. 基础设施完成后:
   - 开发者 A: 用户故事 1
   - 开发者 B: 用户故事 2
   - 开发者 C: 用户故事 3
3. 故事独立完成和集成

---

## 备注

- [P] 任务 = 不同文件, 无依赖
- [Story] 标签将任务映射到特定用户故事以便追溯
- 每个用户故事应独立可完成和可测试
- 实施前验证测试失败
- 每个任务或逻辑组后提交
- 在任何检查点停止以独立验证故事
- 避免: 模糊任务、同文件冲突、破坏独立性的跨故事依赖
